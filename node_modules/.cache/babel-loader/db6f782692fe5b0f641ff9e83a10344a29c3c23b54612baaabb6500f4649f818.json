{"ast":null,"code":"var _jsxFileName = \"/Users/kellyn/Desktop/dappazon/src/components/Product.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { ethers } from \"ethers\";\n\n// Components\nimport Rating from \"./Rating\";\nimport close from \"../assets/close.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Product = _ref => {\n  _s();\n  let {\n    item,\n    provider,\n    account,\n    dappazon,\n    togglePop\n  } = _ref;\n  const [order, setOrder] = useState(null);\n  const [hasBought, setHasBought] = useState(false);\n\n  // To reload all of the information from blockchain\n  const fetchDetails = async () => {\n    const events = await dappazon.queryFilter(\"Buy\");\n    const orders = events.filter(event => event.args.buyer === account && event.args.itemId.toString() === item.id.toString());\n    if (orders.length === 0) return;\n    const order = await dappazon.orders(account, orders[0].args.orderId);\n    setOrder(order);\n  };\n  const buyHandler = async () => {\n    // Click and talk to blockchain, look at test file for codes\n    const signer = await provider.getSigner();\n    let transaction = await dappazon.connect(signer).buy(item.id, {\n      value: item.cost\n    });\n    await transaction.wait();\n    setHasBought(true);\n  };\n  useEffect(() => {\n    fetchDetails();\n  }, [hasBought]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product__details\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product__image\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: item.image,\n          alt: \"Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product__overview\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Rating, {\n          value: item.rating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: ethers.utils.formatUnits(item.cost.toString(), \"ether\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Overview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [item.description, \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi nec tincidunt felis. Morbi efficitur quis nulla ut laoreet. Suspendisse feugiat sit amet tortor at gravida. Curabitur dictum scelerisque fermentum. Nulla pulvinar pulvinar suscipit. Vestibulum quam dolor, molestie vitae consequat vel, porta imperdiet massa. Suspendisse potenti. Cras mattis metus felis. Duis ut augue ultricies, vulputate mauris ut, congue lectus. Nunc commodo condimentum nisl quis tempor. Nunc pulvinar erat vel neque venenatis, non laoreet dolor tincidunt. Etiam suscipit ipsum ut sapien eleifend lobortis. Nam ultricies risus id ante sodales accumsan. Vivamus non nunc dolor.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product__order\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [ethers.utils.formatUnits(item.cost.toString(), \"ether\"), \" ETH\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"FREE delivery\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: new Date(Date.now() + 345600000).toLocaleDateString(undefined, {\n              weekday: \"long\",\n              month: \"long\",\n              day: \"numeric\"\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), item.stock > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"In Stock.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Out of Stock.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 48\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"product__buy\",\n          onClick: buyHandler,\n          children: \"Buy Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"small\", {\n            children: \"Ships from\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), \" Dappazon\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"small\", {\n            children: \"Sold by\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), \" Dappazon\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), order && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product__bought\",\n          children: [\"Item bought on \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: new Date(Number(order.time.toString() + \"000\")).toLocaleDateString(undefined, {\n              weekday: \"long\",\n              month: \"long\",\n              day: \"numeric\"\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: togglePop,\n        className: \"product__close\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: close,\n          alt: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(Product, \"d6wx3FGM19eMk+ho8QwNO8YxwB4=\");\n_c = Product;\nexport default Product;\nvar _c;\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"names":["useEffect","useState","ethers","Rating","close","Product","item","provider","account","dappazon","togglePop","order","setOrder","hasBought","setHasBought","fetchDetails","events","queryFilter","orders","filter","event","args","buyer","itemId","toString","id","length","orderId","buyHandler","signer","getSigner","transaction","connect","buy","value","cost","wait","image","name","rating","address","utils","formatUnits","description","Date","now","toLocaleDateString","undefined","weekday","month","day","stock","Number","time"],"sources":["/Users/kellyn/Desktop/dappazon/src/components/Product.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { ethers } from \"ethers\";\r\n\r\n// Components\r\nimport Rating from \"./Rating\";\r\n\r\nimport close from \"../assets/close.svg\";\r\n\r\nconst Product = ({ item, provider, account, dappazon, togglePop }) => {\r\n  const [order, setOrder] = useState(null);\r\n  const [hasBought, setHasBought] = useState(false);\r\n\r\n  // To reload all of the information from blockchain\r\n  const fetchDetails = async () => {\r\n    const events = await dappazon.queryFilter(\"Buy\");\r\n    const orders = events.filter(\r\n      (event) =>\r\n        event.args.buyer === account &&\r\n        event.args.itemId.toString() === item.id.toString()\r\n    );\r\n\r\n    if (orders.length === 0) return;\r\n    const order = await dappazon.orders(account, orders[0].args.orderId);\r\n    setOrder(order);\r\n  };\r\n\r\n  const buyHandler = async () => {\r\n    // Click and talk to blockchain, look at test file for codes\r\n    const signer = await provider.getSigner();\r\n    let transaction = await dappazon\r\n      .connect(signer)\r\n      .buy(item.id, { value: item.cost });\r\n    await transaction.wait();\r\n    setHasBought(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDetails();\r\n  }, [hasBought]);\r\n\r\n  return (\r\n    <div className=\"product\">\r\n      <div className=\"product__details\">\r\n        <div className=\"product__image\">\r\n          <img src={item.image} alt=\"Product\" />\r\n        </div>\r\n        <div className=\"product__overview\">\r\n          <h1>{item.name}</h1>\r\n          <Rating value={item.rating} />\r\n          <hr />\r\n          <p>{item.address}</p>\r\n          <h2>{ethers.utils.formatUnits(item.cost.toString(), \"ether\")}</h2>\r\n          <hr />\r\n          <h2>Overview</h2>\r\n          <p>\r\n            {item.description}\r\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi nec\r\n            tincidunt felis. Morbi efficitur quis nulla ut laoreet. Suspendisse\r\n            feugiat sit amet tortor at gravida. Curabitur dictum scelerisque\r\n            fermentum. Nulla pulvinar pulvinar suscipit. Vestibulum quam dolor,\r\n            molestie vitae consequat vel, porta imperdiet massa. Suspendisse\r\n            potenti. Cras mattis metus felis. Duis ut augue ultricies, vulputate\r\n            mauris ut, congue lectus. Nunc commodo condimentum nisl quis tempor.\r\n            Nunc pulvinar erat vel neque venenatis, non laoreet dolor tincidunt.\r\n            Etiam suscipit ipsum ut sapien eleifend lobortis. Nam ultricies\r\n            risus id ante sodales accumsan. Vivamus non nunc dolor.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"product__order\">\r\n          <h1>{ethers.utils.formatUnits(item.cost.toString(), \"ether\")} ETH</h1>\r\n          <p>\r\n            FREE delivery\r\n            <br />\r\n            <strong>\r\n              {new Date(Date.now() + 345600000).toLocaleDateString(undefined, {\r\n                weekday: \"long\",\r\n                month: \"long\",\r\n                day: \"numeric\",\r\n              })}\r\n            </strong>\r\n          </p>\r\n\r\n          {item.stock > 0 ? <p>In Stock.</p> : <p>Out of Stock.</p>}\r\n\r\n          <button className=\"product__buy\" onClick={buyHandler}>\r\n            Buy Now\r\n          </button>\r\n          <p>\r\n            <small>Ships from</small> Dappazon\r\n          </p>\r\n          <p>\r\n            <small>Sold by</small> Dappazon\r\n          </p>\r\n\r\n          {order && (\r\n            <div className=\"product__bought\">\r\n              Item bought on <br />\r\n              <strong>\r\n                {new Date(\r\n                  Number(order.time.toString() + \"000\")\r\n                ).toLocaleDateString(undefined, {\r\n                  weekday: \"long\",\r\n                  month: \"long\",\r\n                  day: \"numeric\",\r\n                })}\r\n              </strong>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <button onClick={togglePop} className=\"product__close\">\r\n          <img src={close} alt=\"Close\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}